<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sashank Balusu</title>
  <link href="https://fonts.googleapis.com/css2?family=Bellefair&display=swap" rel="stylesheet">
  <link rel="icon" href="pineappleicon.png" type="image/x-icon">

  <style>
    :root{
      --ink:#111;
      --tint: rgba(255,255,255,0.65);
      --gap: 28px; 
      --nav-h: 56px;
      --cols: 3;
    }

    *{ box-sizing:border-box; }

    /* iOS Safari niceties */
    html, body { height: 100%; }
    body{
      margin:0;
      font-family:'Bellefair', Arial, sans-serif;
      color:var(--ink);
      background:#fff;
      -webkit-font-smoothing:antialiased;
      text-rendering:optimizeLegibility;
      -webkit-overflow-scrolling: touch;
      overscroll-behavior-y: none;
      overflow-x: hidden;
    }

    .nav{
      position:fixed; inset:0 0 auto 0; height:var(--nav-h);
      display:flex; align-items:center; justify-content:space-between;
      padding:0 24px;
      background:var(--tint);
      backdrop-filter:blur(10px);
      -webkit-backdrop-filter:blur(10px);
      z-index:10;

      /* help Safari compositing / reduce jank */
      will-change: transform;
      transform: translateZ(0);
    }
    .brand{ font-size:22px; }
    .tabs{ display:flex; gap:18px; }
    .tabs a{ color:var(--ink); text-decoration:none; font-size:18px; position:relative; }
    .tabs a::after{
      content:""; position:absolute; left:0; right:0; bottom:-2px; height:1px;
      background: currentColor; transform:scaleX(0); transform-origin:left; transition:.25s;
    }
    .tabs a:hover::after, .tabs a[aria-current="page"]::after{ transform:scaleX(1); }

    main{ padding-top: calc(var(--nav-h) + 18px); }
    .gallery{ padding: 0 clamp(16px, 4vw, 48px) 72px; }

    .columns{
      display: grid;
      grid-template-columns: repeat(var(--cols), 1fr);
      gap: var(--gap);
      align-items: start; 
    }
    .col{
      display: flex;
      flex-direction: column;
      gap: var(--gap);
      min-width: 0;
    }

    .tile{
      position: relative;
      overflow: hidden; 
      background:#f6f6f6;
      box-shadow: 0 6px 18px rgba(0,0,0,.08);
    }
    .tile img{
      width: 100%;
      height: auto;
      display: block;
      transition: transform .35s ease;
    }
    .tile:hover img{ transform: scale(1.04); }

    /* ---- Lightbox with animation + scroll lock friendly ---- */
    .lightbox{
      position: fixed; inset:0;
      display:grid; place-items:center;
      background: rgba(0,0,0,.75);
      z-index: 50;
      padding: clamp(12px, 4vw, 40px);

      /* use opacity/visibility so we can animate (not display:none) */
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
      transition: opacity .25s ease, visibility .25s ease;
    }
    .lightbox.open{
      opacity: 1;
      visibility: visible;
      pointer-events: auto;
    }

    .lightbox-content{
      position: relative;
      display: inline-block;

      /* slide/zoom-in entrance */
      transform: translateY(12px) scale(.98);
      transition: transform .25s ease;
    }
    .lightbox.open .lightbox-content{
      transform: translateY(0) scale(1);
    }

    .lightbox img{
      max-width:100%;
      max-height: 86vh;
      box-shadow: 0 10px 40px rgba(0,0,0,.35);
      background:#000;
    }

    .lightbox .close{
      position:absolute;
      top:8px;
      right:8px;
      font-size:28px;
      color:#000;
      cursor:pointer;
      line-height:1;
      background:#fff;
      border:none;
      width:36px;
      height:36px;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .brand a{ color:var(--ink); text-decoration:none; position:relative; }

    @media (max-width: 860px){
      :root{ --nav-h: 52px; }
      .nav{ padding:0 16px; }
      .brand{ font-size:20px; }
      .tabs a{ font-size:17px; }
    }
  </style>
</head>
<body>
  <header class="nav">
    <div class="brand"><a href="index.html">Sashank Balusu</a></div>
    <nav class="tabs">
      <a href="drone.html" aria-current="page">Pictures</a>
      <!-- <a href="thoughts.html">Thoughts</a> -->
    </nav>
  </header>

  <main>
    <section class="gallery">
      <div id="columns" class="columns"></div>
    </section>
  </main>

  <div id="lightbox" class="lightbox" aria-hidden="true">
    <div class="lightbox-content">
      <button class="close" aria-label="Close">&times;</button>
      <img id="lightbox-img" alt="">
    </div>
  </div>

  <script>
    (function(){
      const imageOrder = [
        "drone19.JPG", "drone18.JPG", "drone20.JPG", "drone4.JPG","drone17.JPG","drone11.JPG","drone16.JPG","drone6.JPG",
        "drone3.JPG","drone9.JPG","drone14.JPG","drone1.JPG","drone15.JPG","drone13.JPG",
        "drone2.JPG","drone5.JPG","drone7.JPG","drone10.JPG","drone8.JPG"
      ];

      function computeCols(width){
        if(width >= 1600) return 3;
        if(width >= 1200) return 2;
        return 1; 
      }

      const columnsRoot = document.getElementById('columns');
      const lightbox = document.getElementById('lightbox');
      const lightboxImg = document.getElementById('lightbox-img');
      const closeBtn = lightbox.querySelector('.close');

      let colEls = [];
      let resizeTimer;
      let currentCols = 0;
      let lastWidth = window.innerWidth;

      /* ---------- Masonry helpers ---------- */
      function setCols(n){
        columnsRoot.style.setProperty('--cols', n);
        columnsRoot.innerHTML = '';
        colEls = Array.from({length:n}, () => {
          const c = document.createElement('div');
          c.className = 'col';
          columnsRoot.appendChild(c);
          return c;
        });
      }

      function makeTile(src){
        const fig = document.createElement('figure');
        fig.className = 'tile';
        const a = document.createElement('a');
        a.href = src;
        a.addEventListener('click', (e)=>{
          e.preventDefault();
          openLightbox(src);
        });
        const img = document.createElement('img');
        img.alt = src.split('/').pop();
        img.loading = 'lazy';
        img.decoding = 'async';
        img.src = src;
        a.appendChild(img);
        fig.appendChild(a);
        return fig;
      }

      function placeTileMasonry(tile){
        const heights = colEls.map(col => col.scrollHeight);
        const idx = heights.indexOf(Math.min(...heights));
        colEls[idx].appendChild(tile);
      }

      function build(force = false){
        const cols = computeCols(window.innerWidth);
        if (!force && cols === currentCols) return; // ðŸ‘‰ only rebuild if count changed
        currentCols = cols;

        setCols(cols);
        imageOrder.forEach(src => placeTileMasonry(makeTile(src)));
      }

      /* ---------- Resize handling (iOS Safari safe) ---------- */
      function onResize(){
        const w = window.innerWidth;
        if (w === lastWidth) return; // ðŸ‘‰ ignore height-only resizes from toolbar
        lastWidth = w;
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(() => build(false), 150);
      }

      /* ---------- Lightbox + scroll lock ---------- */
      let scrollY = 0;
      function lockScroll(){
        scrollY = window.scrollY || document.documentElement.scrollTop || 0;
        document.documentElement.style.overflow = 'hidden';
        document.body.style.position = 'fixed';
        document.body.style.top = `-${scrollY}px`;
        document.body.style.left = '0';
        document.body.style.right = '0';
        document.body.style.width = '100%';
      }
      function unlockScroll(){
        document.documentElement.style.overflow = '';
        document.body.style.position = '';
        document.body.style.top = '';
        document.body.style.left = '';
        document.body.style.right = '';
        document.body.style.width = '';
        window.scrollTo(0, scrollY);
      }

      function openLightbox(src){
        lightboxImg.src = src;
        lightboxImg.alt = src.split('/').pop();
        lightbox.classList.add('open');
        lightbox.setAttribute('aria-hidden','false');
        lockScroll();
      }

      function closeLightbox(){
        lightbox.classList.remove('open');
        lightbox.setAttribute('aria-hidden','true');
        // wait a tick so the fade-out can start before unlocking scroll
        setTimeout(unlockScroll, 10);
      }

      closeBtn.addEventListener('click', closeLightbox);
      lightbox.addEventListener('click', (e)=>{ if(e.target===lightbox) closeLightbox(); });
      document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeLightbox(); });

      /* ---------- Init ---------- */
      build(true);
      window.addEventListener('resize', onResize);
    })();
  </script>
</body>
</html>
